<div class="card mb-3 team-controls">
  <div class="card-header">
    <strong>{{ teamNumber === TeamNumber.TEAM_A ? 'Équipe A' : 'Équipe B' }}</strong>
  </div>

  <div class="card-body">
    <div class="row mb-2 align-items-center">
      <label class="col-md-3 col-form-label">Choisir équipe</label>
      <div class="col-md-9">
        <select
          class="form-select"
          [ngModel]="team()?.name"
          (ngModelChange)="onTeamNameChange($event)"
        >
          @for (group of availableTeamsByGroup() | keyvalue; track group.key; let last = $last) {
            @for (t of group.value; track t.name) {
              <option [value]="t.name" [selected]="t.name === team().name">
                {{ t.icon }} {{ t.name }}
              </option>
            }
            @if (!last) {
              <option disabled>──────────</option>
            }
          }
        </select>
      </div>
    </div>

    <ng-container *ngFor="let role of roles">
      <div class="row mb-2 align-items-center">
        <label
          class="col-md-3 col-form-label"
          [innerText]="
            role === Role.ASSIST ? 'Assistant(e)-capitaine' :
            role">
        </label>

        <div class="col-md-9 d-flex gap-2 align-items-center">
          <select
            class="form-select"
            [ngModel]="team().players[role]?.code"
            (ngModelChange)="onPlayerNameChange($event, role)"
          >
            <option value="" [selected]="!team().players[role]">Aucun(e)</option>
            <option *ngFor="let player of players"
                    [value]="player.code">
              {{ player.firstName }} {{ player.name }}
            </option>
          </select>

          <input
            *ngIf="role !== 'coach'"
            type="number"
            class="form-control form-control-sm"
            style="width: 5.5rem;"
            [ngModel]="team().players[role]?.number"
            (ngModelChange)="onPlayerNumberChange($event, role)"
            [attr.list]="teamNumber + '-datalist'"
            placeholder="N°"
          />
        </div>


        <datalist [id]="teamNumber + '-datalist'">
          <option *ngFor="let num of jerseys()" [value]="num"></option>
        </datalist>
      </div>
    </ng-container>
  </div>
</div>
