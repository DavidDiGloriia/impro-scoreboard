<div class="card mb-3 team-controls">
  <div class="card-header">
    <strong>{{ teamNumber === TeamNumber.TEAM_A ? 'Équipe A' : 'Équipe B' }}</strong>
  </div>

  <div class="card-body">
    <div class="row mb-2 align-items-center">
      <label class="col-md-3 col-form-label">Choisir équipe</label>
      <div class="col-md-9">
        <select
          class="form-select"
          [ngModel]="team()?.name"
          (ngModelChange)="onTeamNameChange($event)"
        >
          @for (group of availableTeamsByGroup() | keyvalue; track group.key; let last = $last) {
            @for (t of group.value; track t.name) {
              <option [value]="t.name" [selected]="t.name === team().name">
                {{ t.icon }} {{ t.name }}
              </option>
            }
            @if (!last) {
              <option disabled>──────────</option>
            }
          }
        </select>
      </div>
    </div>

    @if (isColorTeam()) {
      <div class="row mb-2 align-items-center">
        <label class="col-md-3 col-form-label">Nom personnalisé</label>
        <div class="col-md-9">
          <input
            type="text"
            class="form-control"
            [ngModel]="team()?.customName || team()?.name"
            (ngModelChange)="onCustomNameChange($event)"
            placeholder="Nom personnalisé"
          />
        </div>
      </div>

      <div class="row mb-2 align-items-start">
        <label class="col-md-3 col-form-label">Logo</label>
        <div class="col-md-9">
          <div class="logo-grid">
            @for (logo of availableLogos; track logo.path) {
              <div
                class="logo-thumbnail"
                [class.active]="team()?.img === logo.path"
                (click)="onImgChange(logo.path)"
              >
                <img [src]="logo.path" [alt]="logo.label" />
              </div>
            }
          </div>
        </div>
      </div>
    }

    <ng-container *ngFor="let role of roles">
      <div class="row mb-2 align-items-center">
        <label
          class="col-md-3 col-form-label"
          [innerText]="
            role === Role.ASSIST ? 'Assistant(e)-capitaine' :
            role">
        </label>

        <div class="col-md-9 d-flex gap-2 align-items-center">
          <app-searchable-select
            [options]="playerOptions"
            [ngModel]="team().players[role]?.code || ''"
            (ngModelChange)="onPlayerNameChange($event, role)"
            placeholder="Aucun(e)"
          ></app-searchable-select>

          <input
            *ngIf="role !== 'coach'"
            type="number"
            class="form-control form-control-sm"
            style="width: 5.5rem;"
            [ngModel]="team().players[role]?.number"
            (ngModelChange)="onPlayerNumberChange($event, role)"
            [attr.list]="teamNumber + '-datalist'"
            placeholder="N°"
          />
        </div>


        <datalist [id]="teamNumber + '-datalist'">
          <option *ngFor="let num of jerseys()" [value]="num"></option>
        </datalist>
      </div>
    </ng-container>
  </div>
</div>
